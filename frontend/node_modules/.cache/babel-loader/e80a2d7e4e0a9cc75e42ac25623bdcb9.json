{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gilos\\\\MERN-Blog-App\\\\frontend\\\\src\\\\components\\\\Login.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport dotenv from \"dotenv\";\nimport GoogleLogin from \"react-google-login\";\ndotenv.config();\nconst baseURL = process.env.REACT_APP_BASEURL || \"http://localhost:5000\";\n\nclass Login extends React.Component {\n  //After logging in, redirect to previous page\n  componentDidMount() {\n    if (sessionStorage.getItem(\"isLoggedIn\") === \"true\") {\n      window.history.back();\n    }\n  } // Google login success callback\n\n\n  successGoogleLogin(response) {\n    // Create an instance of the user\n    const user = {\n      username: response.profileObj.name,\n      socialId: response.googleId\n    }; // Make an API call to either findOrCreate the user\n\n    axios.post(`${baseURL}/auth/login`, user).then(res => {\n      // Reload the page once count is 1 to reload the navbar component and display \"Logout\" as an option instead of \"Login\"\n      let count = 0; // If the response has a valid social Id\n\n      if (res.data.socialId === response.googleId) {\n        // Set the username and isLoggedIn in the session storage\n        sessionStorage.setItem(\"isLoggedIn\", \"true\");\n        sessionStorage.setItem(\"username\", res.data.username);\n        count++; // Remove the user session cookie after 24 hours, to log the user out.\n        // This is for cases when the user doesn't end the session or doesn't logout\n\n        window.setTimeout(() => {\n          sessionStorage.removeItem(\"isLoggedIn\");\n          sessionStorage.removeItem(\"username\");\n        }, 24 * 60 * 60 * 60); // If user data is stored in the session Storage, then reload page to update Navbar component appropriately\n\n        if (count === 1) {\n          window.location.reload();\n        }\n      } // If user data returned is invalid, then redirect to the login page once again\n      else {\n          window.location = \"/login\";\n        }\n    }).catch(err => console.error(err));\n  } // Twitter login success callback\n  // Very similar to the previous google login callback\n  // Google login failure callback\n\n\n  failureGoogleLogin(response) {\n    console.error(response);\n    window.location = \"/login\";\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, \"Login with your social account\", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"full-stop\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 25\n      }\n    }, \".\")), /*#__PURE__*/React.createElement(\"hr\", {\n      className: \"gold-hr\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"google\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(GoogleLogin, {\n      clientId: \"673478352739-6eev22uef080837blt2ak6igle29sbvu.apps.googleusercontent.com\" //{process.env.REACT_APP_GOOGLE_CLIENT_ID}\n      ,\n      buttonText: \"Log in With Google\",\n      onSuccess: this.successGoogleLogin,\n      onFailure: this.failureGoogleLogin,\n      cookiePolicy: \"single_host_origin\",\n      scope: \"profile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/gilos/MERN-Blog-App/frontend/src/components/Login.js"],"names":["React","axios","dotenv","GoogleLogin","config","baseURL","process","env","REACT_APP_BASEURL","Login","Component","componentDidMount","sessionStorage","getItem","window","history","back","successGoogleLogin","response","user","username","profileObj","name","socialId","googleId","post","then","res","count","data","setItem","setTimeout","removeItem","location","reload","catch","err","console","error","failureGoogleLogin","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport dotenv from \"dotenv\";\r\n\r\nimport GoogleLogin from \"react-google-login\";\r\n\r\ndotenv.config();\r\nconst baseURL = process.env.REACT_APP_BASEURL || \"http://localhost:5000\";\r\n\r\nclass Login extends React.Component {\r\n    //After logging in, redirect to previous page\r\n    componentDidMount() {\r\n        if (sessionStorage.getItem(\"isLoggedIn\") === \"true\") {\r\n            window.history.back();\r\n        }\r\n    }\r\n\r\n    // Google login success callback\r\n    successGoogleLogin(response) {\r\n        // Create an instance of the user\r\n        const user = {\r\n            username: response.profileObj.name,\r\n            socialId: response.googleId,\r\n        };\r\n\r\n        // Make an API call to either findOrCreate the user\r\n        axios\r\n            .post(`${baseURL}/auth/login`, user)\r\n            .then((res) => {\r\n                // Reload the page once count is 1 to reload the navbar component and display \"Logout\" as an option instead of \"Login\"\r\n                let count = 0;\r\n\r\n                // If the response has a valid social Id\r\n                if (res.data.socialId === response.googleId) {\r\n                    // Set the username and isLoggedIn in the session storage\r\n                    sessionStorage.setItem(\"isLoggedIn\", \"true\");\r\n                    sessionStorage.setItem(\"username\", res.data.username);\r\n                    count++;\r\n\r\n                    // Remove the user session cookie after 24 hours, to log the user out.\r\n                    // This is for cases when the user doesn't end the session or doesn't logout\r\n                    window.setTimeout(() => {\r\n                        sessionStorage.removeItem(\"isLoggedIn\");\r\n                        sessionStorage.removeItem(\"username\");\r\n                    }, 24 * 60 * 60 * 60);\r\n\r\n                    // If user data is stored in the session Storage, then reload page to update Navbar component appropriately\r\n                    if (count === 1) {\r\n                        window.location.reload();\r\n                    }\r\n                }\r\n                // If user data returned is invalid, then redirect to the login page once again\r\n                else {\r\n                    window.location = \"/login\";\r\n                }\r\n            })\r\n            .catch((err) => console.error(err));\r\n    }\r\n\r\n    // Twitter login success callback\r\n    // Very similar to the previous google login callback\r\n   \r\n    // Google login failure callback\r\n    failureGoogleLogin(response) {\r\n        console.error(response);\r\n        window.location = \"/login\";\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"login\">\r\n                    <h5>\r\n                        Login with your social account\r\n                        <span className=\"full-stop\">.</span>\r\n                    </h5>\r\n                    <hr className=\"gold-hr\" />\r\n                    <div className=\"google\">\r\n                        <GoogleLogin\r\n                            clientId='673478352739-6eev22uef080837blt2ak6igle29sbvu.apps.googleusercontent.com'//{process.env.REACT_APP_GOOGLE_CLIENT_ID}\r\n                            buttonText=\"Log in With Google\"\r\n                            onSuccess={this.successGoogleLogin}\r\n                            onFailure={this.failureGoogleLogin}\r\n                            cookiePolicy={\"single_host_origin\"}\r\n                            scope=\"profile\"\r\n                        />\r\n                    </div>\r\n                    \r\n                \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}